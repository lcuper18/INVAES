<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel de Administración</title>
    <link rel="stylesheet" href="./static/css/styles.css">
    <style>
        .tabs {
            display: flex;
            gap: 0;
            border-bottom: 2px solid #d1d5db;
            margin-bottom: 1.5rem;
        }
        .tab-btn {
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            border: none;
            background: none;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }
        .tab-btn.active {
            color: #0d9488;
            border-bottom-color: #0d9488;
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .tab-content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .table-container {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        th, td {
            padding: 0.75rem 1rem;
            border: 1px solid #e5e7eb;
            text-align: left;
        }
        th {
            background-color: #f9fafb;
        }
        .btn-sm {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
            margin-right: 0.25rem;
        }
        .status-active {
            color: #10b981;
            font-weight: bold;
        }
        .status-inactive {
            color: #ef4444;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Pestañas de Navegación -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="personal">Gestión de Personal</button>
            <button class="tab-btn" data-tab="comisiones">Comisiones</button>
            
        </div>

        <!-- Contenido de las Pestañas -->

        <!-- Pestaña 1: Gestión de Personal -->
        <div id="personal" class="tab-content active">
            <div class="card">
                <h3>Listado de Personal</h3>
                <button class="btn-primary" onclick="alert('Abrir formulario para agregar empleado')">+ Agregar Nuevo Empleado</button>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Puesto</th>
                                <th>Teléfono</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Juan Mora</td>
                                <td>Técnico Senior</td>
                                <td>8888-8888</td>
                                <td><span class="status-active">Activo</span></td>
                                <td>
                                    <button class="btn-secondary btn-sm" onclick="alert('Ver/Editar datos de Juan Mora')">Ver/Editar</button>
                                    <button class="btn-secondary btn-sm" onclick="alert('Desactivar a Juan Mora')">Desactivar</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Ana Campos</td>
                                <td>Técnico A/C</td>
                                <td>7777-7777</td>
                                <td><span class="status-active">Activo</span></td>
                                <td>
                                    <button class="btn-secondary btn-sm">Ver/Editar</button>
                                    <button class="btn-secondary btn-sm">Desactivar</button>
                                </td>
                            </tr>
                             <tr>
                                <td>Carlos Rojas</td>
                                <td>Asistente Técnico</td>
                                <td>6666-6666</td>
                                <td><span class="status-inactive">Inactivo</span></td>
                                <td>
                                    <button class="btn-secondary btn-sm">Ver/Editar</button>
                                    <button class="btn-secondary btn-sm">Activar</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Pestaña 2: Calculadora de Comisiones -->
        <div id="comisiones" class="tab-content">
            <div class="card">
                <h3>Calculadora de Comisiones por Proyecto/Tarea</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 1.5rem;">
                    
                    <!-- Columna de Formulario -->
                    <div>
                        <div class="form-group">
                            <label for="com-tecnico">Técnico</label>
                            <select id="com-tecnico" class="input">
                                <option value="8" data-special-rate="0">Juan Mora (Tasa base 8%)</option>
                                <option value="8" data-special-rate="0">Ana Campos (Tasa base 8%)</option>
                                <option value="10" data-special-rate="1">Carlos Rojas (Tasa especial 10%)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="com-cliente">Cliente</label>
                            <select id="com-cliente" class="input">
                                <option value="1.5">Cliente A (Industrias S.A.) - Tasa Cliente 1.5%</option>
                                <option value="1.2">Cliente B (Comercializadora La Central) - Tasa Cliente 1.2%</option>
                                <option value="1.5">Cliente C (Residencial Los Reyes) - Tasa Cliente 1.5%</option>
                                <option value="2.0">Cliente D (Contrato Especial) - Tasa Cliente 2.0%</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="com-monto">Monto Facturado de la Tarea/Proyecto (₡)</label>
                            <input type="number" id="com-monto" class="input" placeholder="Ej: 150000">
                        </div>
                        <div class="form-group">
                            <label for="com-horas">Horas Dedicadas</label>
                            <input type="number" id="com-horas" class="input" placeholder="Ej: 4">
                        </div>
                        <button class="btn-primary" onclick="calcularComision()">Calcular Comisión</button>
                    </div>

                    <!-- Columna de Resultados -->
                    <div class="card" style="background-color: #f8fafc;">
                        <h4>Resultado del Cálculo</h4>
                        <div id="resultado-comision" style="margin-top: 1rem; padding: 1rem; border: 1px dashed #ccc; border-radius: 0.5rem; min-height: 150px;">
                            <p><strong>Tasa Base del Técnico:</strong> <span id="res-tasa-tecnico">--</span>%</p>
                            <p><strong>Tasa Adicional por Cliente:</strong> <span id="res-tasa-cliente">--</span>%</p>
                            <p><strong>Tasa de Comisión Final Aplicada:</strong> <span id="res-tasa-final">--</span>%</p>
                            <hr style="margin: 0.5rem 0;">
                            <p><strong>Monto Base para Comisión:</strong> ₡<span id="res-monto-base">0.00</span></p>
                            <h4 style="margin-top: 1rem;">Comisión Total: <span style="color: #0d9488;">₡<span id="res-comision-total">0.00</span></span></h4>
                        </div>
                        <p style="font-size: 0.8rem; color: #666; margin-top: 1rem;">
                            <strong>Nota:</strong> La comisión se calcula como: 
                            <br>
                            <em>Monto Facturado * (Tasa Técnico + Tasa Cliente)</em>.
                            <br>
                            Las horas son informativas para análisis futuros.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        

    </div>

    <script>
        // Lógica para cambiar de pestañas
        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        tabButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                tabButtons.forEach(b => b.classList.remove('active'));
                tabContents.forEach(tab => tab.classList.remove('active'));
                this.classList.add('active');
                document.getElementById(this.dataset.tab).classList.add('active');
            });
        });

        // Lógica para la calculadora de comisiones
        function calcularComision() {
            const tecnicoSelect = document.getElementById('com-tecnico');
            const clienteSelect = document.getElementById('com-cliente');
            const montoInput = document.getElementById('com-monto');
            
            const tasaTecnico = parseFloat(tecnicoSelect.value);
            const tasaCliente = parseFloat(clienteSelect.value);
            const montoFacturado = parseFloat(montoInput.value);

            if (isNaN(montoFacturado) || montoFacturado <= 0) {
                alert("Por favor, ingrese un monto facturado válido.");
                return;
            }

            const tasaFinal = tasaTecnico + tasaCliente;
            const comisionTotal = montoFacturado * (tasaFinal / 100);

            // Mostrar resultados
            document.getElementById('res-tasa-tecnico').textContent = tasaTecnico.toFixed(2);
            document.getElementById('res-tasa-cliente').textContent = tasaCliente.toFixed(2);
            document.getElementById('res-tasa-final').textContent = tasaFinal.toFixed(2);
            document.getElementById('res-monto-base').textContent = montoFacturado.toLocaleString('es-CR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
            document.getElementById('res-comision-total').textContent = comisionTotal.toLocaleString('es-CR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }

    </script>
</body>
</html>